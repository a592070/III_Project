--------------------------------------------------------
--  已建立檔案 - 星期四-十二月-03-2020   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table H_ORDER_LIST
--------------------------------------------------------
DROP TABLE "III_TEAM_DBA"."H_ORDER_LIST" cascade constraints;
DROP VIEW "III_TEAM_DBA"."H_ORDERLIST_VIEW";

  CREATE TABLE "H_ORDER_LIST" 
   (	"SN_ORDER" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 60 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ORDER_ID" NUMBER, 
	"ORDER_HOTEL_ID" NUMBER, 
	"DOUBLE_ROOM" NUMBER, 
	"QUADRUPLE_ROOM" NUMBER, 
	"CHECK_IN" DATE, 
	"CHECK_OUT" DATE, 
	"H_PRICE" NUMBER, 
	"CLIENT_NAME" VARCHAR2(255 BYTE), 
	"CLIENT_PHONE" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into H_ORDER_LIST
SET DEFINE OFF;
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('21', '50', 0, 1, TO_DATE('2020-10-23 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-10-25 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', '劉興宇', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('141', '77', 1, 1, TO_DATE('2020-10-23 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-10-25 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '5000', 'Excalibur', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('162', '73', 0, 1, TO_DATE('2020-12-23 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-12-25 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Khora', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('62', '65', 1, 1, TO_DATE('2020-12-18 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-12-21 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Wukong', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('64', '66', 0, 1, TO_DATE('2020-10-23 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-10-26 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Equinox', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('164', '50', 1, 1, TO_DATE('2020-11-16 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-11-18 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '4000', 'Chroma', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('26', '50', 1, 0, TO_DATE('2020-11-10 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-11-15 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Valkyr', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('45', '50', 1, 0, TO_DATE('2020-10-23 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-10-25 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Oberon', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('82', '80', 0, 1, TO_DATE('2020-12-06 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-12-08 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Volt', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('21', '80', 1, 1, TO_DATE('2020-10-02 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-10-05 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Limbo', '0921637584');
INSERT INTO "III_TEAM_DBA"."H_ORDER_LIST" (ORDER_ID, ORDER_HOTEL_ID, DOUBLE_ROOM, QUADRUPLE_ROOM, CHECK_IN, CHECK_OUT, H_PRICE, CLIENT_NAME, CLIENT_PHONE) VALUES ('21', '80', 0, 1, TO_DATE('2020-10-08 15:38:42', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-10-10 15:39:00', 'YYYY-MM-DD HH24:MI:SS'), '6000', 'Titania', '0921637584');

--------------------------------------------------------
--  DDL for Index H_ORDER_LIST_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "H_ORDER_LIST_PK" ON "H_ORDER_LIST" ("SN_ORDER") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  Constraints for Table H_ORDER_LIST
--------------------------------------------------------

  ALTER TABLE "H_ORDER_LIST" MODIFY ("SN_ORDER" NOT NULL ENABLE);
  ALTER TABLE "H_ORDER_LIST" MODIFY ("CLIENT_NAME" NOT NULL ENABLE);
  ALTER TABLE "H_ORDER_LIST" MODIFY ("CLIENT_PHONE" NOT NULL ENABLE);
  ALTER TABLE "H_ORDER_LIST" ADD CONSTRAINT "H_ORDER_LIST_PK" PRIMARY KEY ("SN_ORDER")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table H_ORDER_LIST
--------------------------------------------------------

  ALTER TABLE "H_ORDER_LIST" ADD CONSTRAINT "H_ORDER_LIST_ORDER_TABLE_ORDER_ID_FK" FOREIGN KEY ("ORDER_ID")
	  REFERENCES "ORDER_TABLE" ("ORDER_ID") ENABLE;



CREATE OR REPLACE FORCE VIEW H_ORDERLIST_VIEW
AS SELECT l.sn_order, l.order_id, h.name, l.double_room, l.quadruple_room, l.check_in, l.check_out, l.h_price, l.client_name, l.client_phone, o.username
FROM H_ORDER_LIST l, HOTEL h, ORDER_TABLE o
WHERE l.order_id = o.order_id and l.order_hotel_id = h.sn;